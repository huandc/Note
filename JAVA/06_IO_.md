# 第一章 IO概述

## 1.1 什么是IO

生活中，你肯定经历过这样的场景。当你编辑一个文本文件，忘记了`ctrl+s` ，可能文件就白白编辑了。当你电脑上插入一个U盘，可以把一个视频，拷贝到你的电脑硬盘里。那么数据都是在哪些设备上的呢？键盘、内存、硬盘、外接设备等等。

我们把这种数据的传输，可以看做是一种数据的流动，按照流动的方向，以内存为基准，分为`输入input` 和`输出output` ，即流向内存是输入流，流出内存的输出流。

Java中I/O操作主要是指使用`java.io`包下的内容，进行输入、输出操作。**输入**也叫做**读取**数据，**输出**也叫做作**写出**数据。

## 1.2 IO的分类

根据数据的流向分为：**输入流**和**输出流**。

- **输入流*- ：把数据从`其他设备`上读取到`内存`中的流。 
- **输出流*- ：把数据从`内存` 中写出到`其他设备`上的流。

格局数据的类型分为：**字节流**和**字符流**。

- **字节流*- ：以字节为单位，读写数据的流。
- **字符流*- ：以字符为单位，读写数据的流。

## 1.3 IO的流向说明图解

## 1.4 顶级父类们

|         |          **输入流*-           |             输出流             |
| :-----: | :------------------------: | :-------------------------: |
| **字节流*- | 字节输入流<br />**InputStream*- | 字节输出流<br />**OutputStream*- |
| **字符流*- |   字符输入流<br />**Reader*-    |    字符输出流<br />**Writer*-    |

# 第二章 字节流

## 2.1 一切皆为字节

一切文件数据(文本、图片、视频等)在存储时，都是以二进制数字的形式保存，都一个一个的字节，那么传输时一样如此。所以，字节流可以传输任意文件数据。在操作流的时候，我们要时刻明确，无论使用什么样的流对象，底层传输的始终为二进制数据。

## 2.2 字节输出流【OutputStream】

`java.io.OutputStream`抽象类是表示字节输出流的所有类的超类，将指定的字节信息写出到目的地。它定义了字节输出流的基本共性功能方法。

- `public void close()` ：关闭此输出流并释放与此流相关联的任何系统资源。  
- `public void flush()` ：刷新此输出流并强制任何缓冲的输出字节被写出。  
- `public void write(byte[] b)`：将 b.length字节从指定的字节数组写入此输出流。  
- `public void write(byte[] b, int off, int len)` ：从指定的字节数组写入 len字节，从偏移量 off开始输出到此输出流。  
- `public abstract void write(int b)` ：将指定的字节输出流。

> 小贴士：
>
> close方法，当完成流的操作时，必须调用此方法，释放系统资源。

## 2.3 FileOutputStream类

`OutputStream`有很多子类，我们从最简单的一个子类开始。

`java.io.FileOutputStream`类是文件输出流，用于将数据写出到文件。

### 构造方法

- `public FileOutputStream(File file)`：创建文件输出流以写入由指定的 File对象表示的文件。 
- `public FileOutputStream(String name)`： 创建文件输出流以指定的名称写入文件。  

当你创建一个流对象时，必须传入一个文件路径。该路径下，如果没有这个文件，会创建该文件。如果有这个文件，会清空这个文件的数据。

### 写出字节数据

1. **写出字节**：`write(int b)` 方法，每次可以写出一个字节数据，代码使用演示：

```java
public class Demo01OutputStream {
    public static void main(String[] args) throws IOException {
        // 使用File对象创建流对象
        File file = new File("D:aaa//a.txt");
        FileOutputStream fileOutputStream = new FileOutputStream(file);
        // 写出数据
        for (int i = 0; i < 24; i++) {
            fileOutputStream.write(i+'a');
        }
        // 关闭资源
        fileOutputStream.close();
    }
}
```

> 小贴士：
>
> 1. 虽然参数为int类型四个字节，但是只会保留一个字节的信息写出。
> 2. 流操作完毕后，必须释放系统资源，调用close方法，千万记得。

2. **写出字节数组**：`write(byte[] b)`，每次可以写出数组中的数据，代码使用演示：

```Java
public class Demo02 {
    public static void main(String[] args) throws IOException {
        // 使用File对象创建流对象
        File file = new File("D:aaa//b.txt");
        FileOutputStream fileOutputStream = new FileOutputStream(file);
        // 写出数据
        String sc = new Scanner(System.in).next();
        byte[] bytes =sc.getBytes();
        fileOutputStream.write(bytes);
        // 关闭资源
        fileOutputStream.close();
    }
}
```

3. **写出指定长度字节数组**：`write(byte[] b, int off, int len)` ,每次写出从off索引开始，len个字节，代码使用演示：

```java
public class Demo02 {
    public static void main(String[] args) throws IOException {
        // 使用File对象创建流对象
        File file = new File("D:aaa//b.txt");
        FileOutputStream fileOutputStream = new FileOutputStream(file);
        // 写出数据
        
        byte[] bytes ="0123456".getBytes();
        fileOutputStream.write(bytes,2,3);
        // 关闭资源
        fileOutputStream.close();
    }
}
```

### 数据追加续写

经过以上的演示，每次程序运行，创建输出流对象，都会清空目标文件中的数据。如何保留目标文件中数据，还能继续添加新数据呢？

- `public FileOutputStream(File file, boolean append)`： 创建文件输出流以写入由指定的 File对象表示的文件。  
- `public FileOutputStream(String name, boolean append)`： 创建文件输出流以指定的名称写入文件。  

这两个构造方法，参数中都需要传入一个boolean类型的值，`true` 表示追加数据，`false` 表示清空原有数据。这样创建的输出流对象，就可以指定是否追加续写了，代码使用演示：

```java
public class FOSWrite {
    public static void main(String[] args) throws IOException {
        // 使用文件名称创建流对象
        FileOutputStream fos = new FileOutputStream("fos.txt",true);
        // 字符串转换为字节数组
        byte[] b = "abcde".getBytes();
        // 写出从索引2开始，2个字节。索引2是c，两个字节，也就是cd。
        fos.write(b);
        // 关闭资源
        fos.close();
    }
}
文件操作前：cd
文件操作后：cdabcde
```

### 写出换行

Windows系统里，换行符号是`\r\n` 。把

以指定是否追加续写了，代码使用演示：

```java
public class FOSWrite {
    public static void main(String[] args) throws IOException {
        // 使用File对象创建流对象
        File file = new File("D:aaa//b.txt");
        FileOutputStream fileOutputStream = new FileOutputStream(file,true);
        //FileOutputStream fileOutputStream = new FileOutputStream(File("D:aaa//b.txt"),true);
        // 写入数据
        byte[] bytes ="0123456".getBytes();
        fileOutputStream.write(bytes,2,3);
        //换行
        fileOutputStream.write("\n".getBytes());
        //再次写入
        fileOutputStream.write(bytes,4,2);
        // 关闭资源
        fileOutputStream.close();
    }
}

>   - 回车符`\r`和换行符`\n` ：
>   - 回车符：回到一行的开头（return）。
>   - 换行符：下一行（newline）。
>   - 系统中的换行：
>   - Windows系统里，每行结尾是 `回车+换行` ，即`\r\n`；
>   - Unix系统里，每行结尾只有 `换行` ，即`\n`；
>   - Mac系统里，每行结尾是 `回车` ，即`\r`。从 Mac OS X开始与Linux统一。

